<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="PubPrdSalsprcQty">
   <!--
    ******************************************************************************
    * SELECT : 공용상품, 판매가, 물량
    * 작성자 : 
    * 작성 일자 : 2022.02.15
    ******************************************************************************
    -->
	    
    <sql id="listWhere">
		<if test="coCd != null and coCd != ''">
		AND A.CO_CD = #{coCd}
		</if>
		<if test="prdId != null and prdId != ''">
		AND A.PRD_ID = #{prdId}
		</if>

	</sql>
	
    <!-- 공용상품정보 -->
    <select id="selectPrPrdInfo" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectPrdInfo   */
		SELECT 
			A.PRD_ID
			,B.MRO_PRD_STATS_CD --상품상태
			,B.ORGPLC_CTRY_CD --원산지
			,A.PRD_NM --상품명
			,B.MNFR_NO --제조사번호
			,(SELECT E.MRO_MNFR_NM FROM TB_PR_MNFR_INFO E WHERE E.CO_CD = B.CO_CD AND E.MNFR_NO = B.MNFR_NO) MNFR_NM --제조원명
			,B.MRO_REPR_ATTR --대표규격
			,'' --주문단위
			,B.HUB_HNL_PSB_YN --허브취급가능여부
			,B.CHM_MTL_PRD_YN --화학물질여부
			,(SELECT C.SAFT_INVN_YN FROM SSP_APP.TB_DP_PRD_DISP_STATS_INFO C WHERE C.CO_CD = A.CO_CD AND C.PRD_ID = A.PRD_ID AND C.BZPLC_ID = '*' AND C.OPR_UNIT_ID = '*') SAFT_INVN_YN--재고여부
			,'' --과면세구분
			,B.PUB_ONLY_SPR_CD --공용전용구분
			,A.BG_SEQ --배지SEQ
			,(SELECT BG_NM FROM TB_SA_BG_INFO D WHERE D.CO_CD = A.CO_CD AND D.BG_SEQ = A.BG_SEQ) BG_NM --배지명
			,A.HASH_TAG --해시태그
			,A.BRND_NM --브랜드명
		FROM SSP_APP.TB_PR_PRD_INFO A
		INNER JOIN SSP_APP.TB_PR_MRO_PRD_INFO B
		ON (0=0 AND B.CO_CD = A.CO_CD AND B.PRD_ID = A.PRD_ID)
		WHERE 0=0
		<include refid="listWhere" />
			<if test="mallSprCd != null and mallSprCd != ''">
			AND A.MALL_SPR_CD = #{mallSprCd}
			</if>
		ORDER BY A.PRD_ID 
    </select>
    

	<!-- 공용상품 진열정보 -->
    <select id="selectDpPrdStatsInfo" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectDpPrdStatsInfo   */
SELECT 
 A.*
FROM TB_DP_PRD_DISP_STATS_INFO A
WHERE 0=0
	<if test="coCd != null and coCd != ''">
		AND A.CO_CD = #{coCd}
	</if>
	<if test="prdId != null and prdId != ''">
		AND A.PRD_ID = #{prdId}
	</if>
	<if test="bzplcId != null and bzplcId != ''">
		AND A.BZPLC_ID = #{bzplcId}
	</if>
	<if test="oprUnitId != null and oprUnitId != ''">
		AND A.OPR_UNIT_ID = #{oprUnitId}
	</if>
    </select>

	<!-- 구매정보 -->
    <select id="selectPurcInfoCount" parameterType="HashMap" resultType="Integer">
        /* PubPrdSalsprcQty.selectPurcInfoCount */
        SELECT
            COUNT(*)
        FROM TB_PC_CPRTCP_PRD_INFO A
		INNER JOIN TB_PC_CPRTCP_PRD_PRC_INFO B
		ON 
		(
		0=0
		AND B.CO_CD = A.CO_CD
		AND B.CPRTCP_ID = A.CPRTCP_ID
		AND B.PRD_ID = A.PRD_ID
		)
		INNER JOIN TB_CP_CPRTCP_BASIS C
		ON
		(
		0=0
		AND C.CO_CD = A.CO_CD
		AND C.CPRTCP_ID = A.CPRTCP_ID
		)
		WHERE 0=0
		<include refid="listWhere" />
			<if test="mallSprCd != null and mallSprCd != ''">
			AND A.MALL_SPR_CD = #{mallSprCd}
			</if>				      
    </select>
    <select id="selectPurcInfo" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectPurcInfo   */
		SELECT 
			A.CO_CD
			,A.CPRTCP_ID
			,A.PRD_ID
			,C.CPRTCP_KOR_NM
			,A.SPL_PSB_YN --공급가능여부
			,A.MIN_ODR_QTY
			,B.PRD_PRC
			,B.CURR_UNIT_CD
			,B.VLD_STR_DT
			,B.VLD_END_DT
			,TO_CHAR(TO_DATE(B.VLD_STR_DT, 'YYYYMMDD')  , 'YYYY.MM.DD')||'~'||TO_CHAR(TO_DATE(B.VLD_END_DT, 'YYYYMMDD')  , 'YYYY.MM.DD') VLD_DT 
		FROM TB_PC_CPRTCP_PRD_INFO A
		INNER JOIN TB_PC_CPRTCP_PRD_PRC_INFO B
		ON 
		(
		0=0
		AND B.CO_CD = A.CO_CD
		AND B.CPRTCP_ID = A.CPRTCP_ID
		AND B.PRD_ID = A.PRD_ID
		)
		INNER JOIN TB_CP_CPRTCP_BASIS C
		ON
		(
		0=0
		AND C.CO_CD = A.CO_CD
		AND C.CPRTCP_ID = A.CPRTCP_ID
		)
		WHERE 0=0
		<include refid="listWhere" />
			<if test="mallSprCd != null and mallSprCd != ''">
			AND A.MALL_SPR_CD = #{mallSprCd}
			</if>	
				ORDER BY A.CPRTCP_ID 
		
	    OFFSET #{startNum} ROWS FETCH FIRST #{rowCount} ROWS ONLY 
    </select>
    
	<!-- 현재 적용 기준가격 -->
    <select id="selectPcPrdPrc" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectPcPrdPrc   */
		SELECT 
		    A2.CO_CD
		    ,A2.PRD_ID
		    ,A2.BZPLC_ID
		    ,A2.PRD_PRC --최저매입가
		    ,A2.PLN_PRFRT --매익율
		    ,A2.STPRC --기준가
		    ,A2.DSTRB_STD_PRC --list price
		    ,A2.SSP_CURR_BSS_SALSPRC --기준판매가
		    ,(CASE WHEN VLD_YN = 'Y' THEN 
		        CASE WHEN A2.RND_DC_SPR_CD = '10' THEN A2.SSP_CURR_BSS_SALSPRC - RND_DC_QTY
		            WHEN A2.RND_DC_SPR_CD = '20' THEN A2.SSP_CURR_BSS_SALSPRC * (1-RND_DC_QTY/100)
		        ELSE
		            A2.SSP_CURR_BSS_SALSPRC
		        END
		    ELSE
		        A2.SSP_CURR_BSS_SALSPRC
		    END) DCRT_APLY_SALSPRC --할인율적용판매가
		    ,A2.RND_DC_SPR_CD --RND할인구분코드
		    ,A2.RND_DC_QTY --RND할인수량
		    ,A2.RND_DC_VLD_STR_DTM --RND할인유효시작일시
		    ,A2.RND_DC_VLD_END_DTM --RND할인유효종료일시
		    ,FN_PC_DETR_INFO(
			    CASE WHEN A2.VLD_YN = 'Y' THEN 
			    	CASE WHEN RND_DC_SPR_CD = '10' THEN PRICE - RND_DC_QTY 
			    		WHEN RND_DC_SPR_CD='20' THEN PRICE*(1-RND_DC_QTY/100) 
			    		ELSE PRICE 
			    	END
			    	ELSE A2.PRICE
			    END 
			) CUST_EXPS_SALSPRC --일반고객노출판매가
		    ,A2.BSS_SALSPRC_STR_DTM --유효기간
		    ,A2.BSS_SALSPRC_END_DTM
		FROM (
		    SELECT 
		        A.CO_CD
		        ,A.PRD_ID
		        ,A.BZPLC_ID
		        ,I.PRD_PRC --최저매입가
		        ,A.PLN_PRFRT --매익율
		        ,A.STPRC --기준가
		        ,A.DSTRB_STD_PRC --list price
		        ,A.SSP_CURR_BSS_SALSPRC --기준판매가
		        ,A.RND_DC_SPR_CD --RND할인구분코드
		        ,A.RND_DC_QTY --RND할인수량
		        ,CASE WHEN SYSDATE BETWEEN TO_DATE(SUBSTR(A.RND_DC_VLD_STR_DTM,1,8),'YYYYMMDD') AND TO_DATE(A.RND_DC_VLD_END_DTM,'YYYYMMDDHH24MISS') THEN 'Y' END VLD_YN
		        ,A.RND_DC_VLD_STR_DTM --RND할인유효시작일시
		        ,A.RND_DC_VLD_END_DTM --RND할인유효종료일시
		        ,(
		        CASE WHEN A.RND_DC_VLD_STR_DTM IS NOT NULL
		            THEN SUBSTR(A.RND_DC_VLD_STR_DTM, 0, 4)||'.'||SUBSTR(A.RND_DC_VLD_STR_DTM, 5, 2)||'.'||SUBSTR(A.RND_DC_VLD_STR_DTM, 7, 2)||'~'||
		                SUBSTR(A.RND_DC_VLD_END_DTM, 0, 4)||'.'||SUBSTR(A.RND_DC_VLD_END_DTM, 5, 2)||'.'||SUBSTR(A.RND_DC_VLD_END_DTM, 7, 2)
		            ELSE ''
		        END
		        )RND_DC_VLD_DTM    
		        ,FN_PC_EXPS_SALSPRC(A.CO_CD, A.PRD_ID, A.BZPLC_ID, B.OPR_UNIT_ID, '30') PRICE --기간할인적용 전 고객노출판매가
		        ,A.BSS_SALSPRC_STR_DTM --기준판매가시작일시
		        ,A.BSS_SALSPRC_END_DTM --기준판매가종료일시
		        ,(
		        CASE WHEN A.BSS_SALSPRC_STR_DTM IS NOT NULL
		            THEN SUBSTR(A.BSS_SALSPRC_STR_DTM, 0, 4)||'.'||SUBSTR(A.BSS_SALSPRC_STR_DTM, 5, 2)||'.'||SUBSTR(A.BSS_SALSPRC_STR_DTM, 7, 2)||'~'||
		                SUBSTR(A.BSS_SALSPRC_END_DTM, 0, 4)||'.'||SUBSTR(A.BSS_SALSPRC_END_DTM, 5, 2)||'.'||SUBSTR(A.BSS_SALSPRC_END_DTM, 7, 2)
		            ELSE ''
		        END
		        )BSS_SALSPRC_DTM     
		    FROM TB_PC_PRD_PRC_DTLS A --가격정보
		    INNER JOIN TB_DP_PRD_DISP_STATS_INFO B --진열정보
		    ON B.CO_CD = A.CO_CD AND B.PRD_ID = A.PRD_ID AND B.BZPLC_ID = A.BZPLC_ID
		    LEFT OUTER JOIN (
		                SELECT * FROM (
		                    SELECT 
		                        ROW_NUMBER() OVER (PARTITION BY A.PRD_ID ORDER BY PRD_PRC) AS NUM,
		                        MAX(MIN_ODR) OVER (PARTITION BY A.PRD_ID) AS MIN_ODR_QTY,
		                        A.*
		                    FROM(
		                        SELECT 
		                            A.CO_CD,
		                            B.SPL_PSB_YN,
		                            CASE WHEN A.CURR_UNIT_CD = 'KRW' THEN A.PRD_PRC ELSE A.PRD_PRC * 1100 END AS PRD_PRC,
		                            A.CPRTCP_ID,
		                            A.CURR_UNIT_CD,
		                            A.PRD_ID,
		                            C.CPRTCP_KOR_NM AS CPRTCP_NM,
		                            B.MIN_ODR_QTY AS MIN_ODR
		                        FROM TB_PC_CPRTCP_PRD_PRC_INFO A
		                        INNER JOIN TB_PC_CPRTCP_PRD_INFO B
		                        ON A.CO_CD = B.CO_CD
		                            AND B.PRD_ID = A.PRD_ID
		                            AND B.CPRTCP_ID = A.CPRTCP_ID
		                            AND B.ORD_CURR_CD = A.CURR_UNIT_CD
		                             
		                        INNER JOIN TB_CP_CPRTCP_BASIS C
		                            ON C.CO_CD = A.CO_CD
		                            AND C.CPRTCP_ID = A.CPRTCP_ID
		                        WHERE TO_CHAR(SYSDATE,'YYYYMMDD') &gt; VLD_STR_DT
		                        AND TO_CHAR(SYSDATE,'YYYYMMDD') &lt;= VLD_END_DT)A)Z
		                        WHERE NUM = 1
		            )I --구매정보
		    ON I.CO_CD = A.CO_CD
		    AND I.PRD_ID = A.PRD_ID
		    WHERE 0=0
				<include refid="listWhere" />
				<if test="bzplcId != null and bzplcId != ''">
					AND A.BZPLC_ID = #{bzplcId}
				</if>
		)A2    
		
    </select>    
    
    <!-- 물량확인 -->
    <select id="selectPcPrdQtyCount" parameterType="HashMap" resultType="Integer">
   		/* PubPrdSalsprcQty.selectPcPrdQtyCount   */
		SELECT COUNT(*)
		FROM TB_PC_PRD_QTY_DTLS A
		WHERE 0=0

		<if test="coCd != null and coCd != ''">
			AND A.CO_CD = #{coCd} 
		</if>
		<if test="prdId != null and prdId != ''">
			AND A.PRD_ID = #{prdId}
		</if>
		<if test="bzplcId != null and bzplcId != ''">
			AND A.BZPLC_ID = #{bzplcId}
		</if>

    </select>
	<select id="selectPcPrdQty" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectPcPrdQty   */
		SELECT 
			0 CHK
			,A.*
		FROM TB_PC_PRD_QTY_DTLS A
		WHERE 0=0

		<if test="coCd != null and coCd != ''">
			AND A.CO_CD = #{coCd}
		</if>
		<if test="prdId != null and prdId != ''">
			AND A.PRD_ID = #{prdId}
		</if>
		<if test="bzplcId != null and bzplcId != ''">
			AND A.BZPLC_ID = #{bzplcId}
		</if>

ORDER BY A.QTY_SEQ DESC 
OFFSET #{startNum} ROWS FETCH FIRST #{rowCount} ROWS ONLY 
    </select>
    
    <!-- 배송비 -->
    <select id="selectPcPrdDlcstDtlsCount" parameterType="HashMap" resultType="Integer">
    	/* PubPrdSalsprcQty.selectPcPrdDlcstDtlsCount   */
		SELECT 
			COUNT(*)
		FROM TB_PC_PRD_DLCST_DTLS A
		WHERE 0=0

		<if test="coCd != null and coCd != ''">
			AND A.CO_CD = #{coCd} 
		</if>
		<if test="prdId != null and prdId != ''">
			AND A.PRD_ID = #{prdId}
		</if>
		<if test="bzplcId != null and bzplcId != ''">
			AND A.BZPLC_ID = #{bzplcId}
		</if>

    </select>   
	<select id="selectPcPrdDlcstDtls" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectPcPrdDlcstDtls   */
		SELECT 
			0 CHK
			,A.*
		FROM TB_PC_PRD_DLCST_DTLS A
		WHERE 0=0

		<if test="coCd != null and coCd != ''">
			AND A.CO_CD = #{coCd}
		</if>
		<if test="prdId != null and prdId != ''">
			AND A.PRD_ID = #{prdId}
		</if>
		<if test="bzplcId != null and bzplcId != ''">
			AND A.BZPLC_ID = #{bzplcId}
		</if>

ORDER BY A.DLCST_SEQ DESC 
OFFSET #{startNum} ROWS FETCH FIRST #{rowCount} ROWS ONLY 
    </select>  
    
    <!-- 요청 상품 정보 -->
    <select id="selectRdReqNewPrdInfo" parameterType="HashMap" resultType="HashMap">
    	/* PubPrdSalsprcQty.selectRdReqNewPrdInfo   */
		SELECT 
			A.*
			,B.ATFL_NM
		FROM TB_RD_REQ_NEW_PRD_INFO A
		LEFT JOIN TB_PR_PRD_IMG_DTLS B
        ON (
            0=0
            AND B.CO_CD = A.CO_CD
            AND B.PRD_ID = A.REQ_PRD_ID
            AND B.ATFL_TP_CD = '60'
        )
		WHERE 0=0

		<if test="coCd != null and coCd != ''">
			AND A.CO_CD = #{coCd}
		</if>
		<if test="reqPrdId != null and reqPrdId != ''">
			AND A.REQ_PRD_ID = #{reqPrdId}
		</if>
		<if test="rndPrdReqSeq != null and rndPrdReqSeq != ''">
			AND A.RND_PRD_REQ_SEQ = #{rndPrdReqSeq}
		</if>
    </select>    
        
	<!-- 수정 진열상태 -->
	<update id="updateDpPrdStatsInfo" parameterType="HashMap">
		/*PubPrdSalsprcQty.updateDpPrdStatsInfo*/
		UPDATE TB_DP_PRD_DISP_STATS_INFO
		   SET DISP_STATS_CD = #{dispStatsCd}  
		   	 , DISP_STATS_CHGRSN = #{dispStatsChgrsn}
		   	 , RND_USCUST_DISP_STATS_CHGRSN = #{rndUscustDispStatsChgrsn} 
		   	 , UPDPSN_ID = #{updpsnId}
		   	 , UPD_DTM = SYSDATE
		 WHERE CO_CD = #{coCd}
		   AND PRD_ID = #{prdId}
		   AND BZPLC_ID = #{bzplcId}
		   AND OPR_UNIT_ID = #{oprUnitId}
	</update>     
	
	<!-- 신규 진열상태 -->
	<insert id="insertDpPrdStatsInfo" parameterType="HashMap">
        /* PubPrdSalsprcQty.insertDpPrdStatsInfo */
        INSERT INTO TB_DP_PRD_DISP_STATS_INFO
        (
	          CO_CD
	        , PRD_ID
	        , BZPLC_ID
	        , OPR_UNIT_ID
	        , DISP_STATS_CD
	        , DISP_STATS_CHGRSN
	        , RND_USCUST_DISP_STATS_CHGRSN
	        , REGPSN_ID
	        , REG_DTM
        ) VALUES (
	          #{coCd}
	        , #{prdId}
	        , #{bzplcId}
	        , #{oprUnitId}
	        , #{dispStatsCd}
	        , #{dispStatsChgrsn}
	        , #{rndUscustDispStatsChgrsn}
	        , #{updpsnId}
	        , SYSDATE
        )
    </insert>	
	
	<!-- 수정 현재적용기준가격-->
    <update id="updatePcPrdPrcDtls" parameterType="HashMap">
		/*PubPrdSalsprcQty.updatePcPrdPrc table*/
		UPDATE TB_PC_PRD_PRC_DTLS
		   SET SSP_CURR_BSS_SALSPRC = #{sspCurrBssSalsprc}	/* 기준판매가 */
		   		,RND_DC_VLD_STR_DTM = #{rndDcVldStrDtm}
		   		,RND_DC_VLD_END_DTM = #{rndDcVldEndDtm}
		   		,RND_DC_QTY = #{rndDcQty} /* RND할인수량 */
		   		,RND_DC_SPR_CD = #{rndDcSprCd} /* RND할인구분코드 */
		   		,BSS_SALSPRC_STR_DTM = #{bssSalsprcStrDtm}
		   		,BSS_SALSPRC_END_DTM = #{bssSalsprcEndDtm}
		   	 , UPDPSN_ID = #{updpsnId}
		   	 , UPD_DTM = SYSDATE
		 WHERE CO_CD = #{coCd}
		   AND PRD_ID = #{prdId}
		   AND BZPLC_ID = #{bzplcId}
	</update> 	  
	
	<!-- insert 물량 -->
	<insert id="insertPcPrdQtyDtls" parameterType="HashMap">
        /* PubPrdSalsprcQty.insertPcPrdQtyDtls */
        <selectKey keyProperty="qtySeq" resultType="String" order="BEFORE">   
            SELECT NVL(MAX(QTY_SEQ),0)+1 FROM TB_PC_PRD_QTY_DTLS
        </selectKey>        
        INSERT INTO TB_PC_PRD_QTY_DTLS
        (
	          CO_CD
	        , BZPLC_ID
	        , PRD_ID
	        , QTY_SEQ
	        , QTY_ITV_STR
	        , QTY_ITV_END
	        , DC_AMT
	        , QTY_STR_DTM
	        , QTY_END_DTM
	        , REGPSN_ID
	        , REG_DTM
        ) VALUES (
	          #{coCd}
	        , #{bzplcId}
	        , #{prdId}
	        , #{qtySeq}
	        , #{qtyItvStr}
	        , #{qtyItvEnd}
	        , #{dcAmt}
	        , #{qtyStrDtm}
	        , #{qtyEndDtm}
	        , #{regpsnId}
	        , SYSDATE
        )
    </insert> 	
    
    <update id="updatePcPrdQtyDtls" parameterType="HashMap">
		/*PubPrdSalsprcQty.updatePcPrdQtyDtls table*/
		UPDATE TB_PC_PRD_QTY_DTLS
		   SET QTY_ITV_STR = #{qtyItvStr}	/* 물량 */
		   		, QTY_ITV_END = #{qtyItvEnd}
		   		, DC_AMT = #{dcAmt} /* 할인금액 */
		   		, QTY_STR_DTM = #{qtyStrDtm} /* 기간 */
		   		, QTY_END_DTM = #{qtyEndDtm} 
		   	 	, UPDPSN_ID = #{updpsnId}
		   	 	, UPD_DTM = SYSDATE
		 WHERE CO_CD = #{coCd}
		   AND PRD_ID = #{prdId}
		   AND BZPLC_ID = #{bzplcId}
		   AND QTY_SEQ = #{qtySeq}
	</update>
    
    <!-- delete 물량 -->
    <update id="deletePcPrdQtyDtls" parameterType="HashMap">
        /* PubPrdSalsprcQty.deletePcPrdQtyDtls */
        DELETE FROM TB_PC_PRD_QTY_DTLS
         WHERE CO_CD = #{coCd}
         	AND PRD_ID = #{prdId}
		  	AND BZPLC_ID = #{bzplcId}
		   	AND QTY_SEQ = #{qtySeq}
    </update>
	
	<!-- insert 배송비 -->
	<insert id="insertPcPrdDlcstDtls" parameterType="HashMap">
        /* PubPrdSalsprcQty.insertPcPrdDlcstDtls */
        <selectKey keyProperty="dlcstSeq" resultType="String" order="BEFORE">   
            SELECT NVL(MAX(DLCST_SEQ),0)+1 FROM TB_PC_PRD_DLCST_DTLS
        </selectKey>        
        INSERT INTO TB_PC_PRD_DLCST_DTLS
        (
	          CO_CD
	        , BZPLC_ID
	        , PRD_ID
	        , DLCST_SEQ
	        , DLCST_SPR_CD
	        , QTY_ITV_STR
	        , QTY_ITV_END
	        , EXTR_AMT
	        , DLCST_STR_DTM
	        , DLCST_END_DTM
	        , REGPSN_ID
	        , REG_DTM
        ) VALUES (
	          #{coCd}
	        , #{bzplcId}
	        , #{prdId}
	        , #{dlcstSeq}
	        , #{dlcstSprCd}
	        , #{qtyItvStr}
	        , #{qtyItvEnd}
	        , #{extrAmt}
	        , #{dlcstStrDtm}
	        , #{dlcstEndDtm}
	        , #{regpsnId}
	        , SYSDATE
        )
    </insert> 	
    
    <update id="updatePcPrdDlcstDtls" parameterType="HashMap">
		/*PubPrdSalsprcQty.updatePcPrdDlcstDtls table*/
		UPDATE TB_PC_PRD_DLCST_DTLS
		   SET DLCST_SPR_CD = #{dlcstSprCd}	/* 구분 */
		   		, QTY_ITV_STR = #{qtyItvStr}
		   		, QTY_ITV_END = #{qtyItvEnd} 
		   		, EXTR_AMT = #{extrAmt} 		/* 할증금액 */
		   		, DLCST_STR_DTM = #{dlcstStrDtm} 
		   	 	, DLCST_END_DTM = #{dlcstEndDtm} 
		   	 	, UPDPSN_ID = #{updpsnId}
		   	 	, UPD_DTM = SYSDATE
		 WHERE CO_CD = #{coCd}
		   AND PRD_ID = #{prdId}
		   AND BZPLC_ID = #{bzplcId}
		   AND DLCST_SEQ = #{dlcstSeq}
	</update>

	<!-- delete 배송비 -->
    <update id="deletePcPrdDlcstDtls" parameterType="HashMap">
        /* PubPrdSalsprcQty.deletePcPrdDlcstDtls */
        DELETE FROM TB_PC_PRD_DLCST_DTLS
         WHERE CO_CD = #{coCd}
         	AND PRD_ID = #{prdId}
		  	AND BZPLC_ID = #{bzplcId}
		   	AND DLCST_SEQ = #{dlcstSeq}
    </update>    
</mapper>