var win_w,win_h,ie8,ie,sc_t=0,con_w,con_h,ie_vs,com=function(){return{skipnavi:function(e){return document.getElementById(e).tabIndex=-1,document.getElementById(e).focus(),!1},sc_ck:function(){ie8=com.ie8();var e=window,t=document;laypop=$("#laypop"),e.innerWidth?(win_w=e.innerWidth,win_h=e.innerHeight):0!=t.documentElement.clientWidth?(win_w=t.documentElement.clientWidth,win_h=t.documentElement.clientHeight):(win_w=t.body.clientWidth,win_h=t.body.clientHeight),0!=laypop.length&&"block"==laypop.css("display")&&com.laypop("re")},sel_chg:function(e,t){var n=void 0==e?$(".sel_chg"):e;"chg"==t?(n.next(".sel_d").remove(),n.after(com.sel_html(n))):"reset"==t?$.each(n,function(e){var t=$(n[e]),i=t.children().eq(0).text(),o=t.next().children("button"),a=t.next().children("input");o.val(i).html(i),a.val(i),t.children().first().prop("selected",!0).siblings().prop("selected",!1),t.trigger("click")}):n.each(function(){$(this).hide().after(com.sel_html($(this)))})},sel_html:function(e){var t=0;$.each(e.children(),function(){var e=$(this).text(),n=e.replace(/[^(가-힣ㄱ-ㅎㅏ-ㅣa-zA-Z0-9)]/gi,""),i=n.length;18*i>t&&(t=18*i)});var n="",i=e.attr("id"),o=null|e.data("width"),a=""==e.val()?e.children().first().text():e.children('option[value="'+e.val()+'"]').text(),r=e.children().length,s=0!=o?$('<div class="sel_d" data-id="'+i+'" style="min-width:'+o+'px"></div>'):$('<div class="sel_d" data-id="'+i+'" style="min-width:'+t+'px"></div>'),c=$('<ol class="a_list"></ol>'),l='<span class="ctrl"><span class="arrow"></span></span>';l+='<input type="hidden" id="f_'+i+'" name="f_'+i+'" value="">',l+='<button type="button" class="my_value" id="" value="'+a+'">'+a+"</button>",e.children().each(function(e){_val=$(this).val(),_txt=$(this).text(),_last=e==r-1?"last":"",n+='<li class="'+_last+'"><a href="javascript:void(0);" code="'+_val+'">'+_txt+"</a></li>"}),s.append(l,c.append(n));var d=s.children("button"),h=s.children("input");return d.on("click",function(){s.hasClass("open")?(s.removeClass("open").children(".a_list").hide(),s.off("mouseleave")):(s.addClass("open").children(".a_list").show(),s.off("mouseleave").on("mouseleave",function(){d.trigger("click").focus()}))}).on("focus",function(){e.next(".sel_d").removeClass("open").children(".a_list").hide()}),c.find("a").on("click",function(){var t=$(this),n=t.text(),i=t.attr("code"),o=t.parent().index();d.val(i).html(n),h.val(i),e.children().eq(o).prop("selected",!0).siblings().prop("selected",!1),e.trigger("click"),d.trigger("click").focus()}),s},laypop:function(e,t,n,i,o){var a=void 0==n?$("#laypop"):$("#"+n),r=void 0!=t?t:0,s=a.find(".laypop_con"),c=$("body"),l=void 0==i?!1:!0,d=a.find("#inp_today").is(":checked"),h=function(e){for(var t=e+"=",n=0;n<=document.cookie.length;){var i=n+t.length;if(document.cookie.substring(n,i)==t)return-1==(endOfCookie=document.cookie.indexOf(";",i))&&(endOfCookie=document.cookie.length),unescape(document.cookie.substring(i,endOfCookie));if(n=document.cookie.indexOf(" ",n)+1,0==n)break}return""},p=function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var o=e+"="+escape(t)+"; path=/;";void 0!=typeof n&&(o+="; expires="+i.toGMTString()+";"),document.cookie=o};if(s.length-1<r)return alert("[err] com.laypop _idx잘못 넘기면 er"),!1;if("show"==e){if(l&&h(o))return!1;void 0!=a.data("idx")?a.data("idx",r):a.attr("data-idx",r),a.show(),s.eq(r).show().siblings().hide();var f=s.eq(r).children(".ti");f.find("hr").width(f.outerWidth(!0)),c.css({"overflow-x":"hidden","overflow-y":"hidden"}).find("#container").css({"z-index":"auto"}),com.laypop("re",t,n,i,o);var u=s.eq(r).find("a"),v=u.eq(0).addClass("fcs_tabS"),_=u.eq(u.length-1).addClass("fcs_tabE");v.on("keydown",function(e){var t=event||e,n=t.which||t.keyCode;return 9===n&&t.shiftKey?(_.focus(),!1):void 0}),_.on("keydown",function(e){var t=event||e,n=t.which||t.keyCode;return 9!==n||t.shiftKey?void 0:(v.focus(),!1)}),s.attr("tab-index",0).focus()}else if("re"==e){a.css({width:win_w,height:win_h});var m=a.data("idx"),s=a.children(".laypop_con").eq(m),g=s.outerHeight(!0),x=(win_h-g)/2;x>parseInt(0)?s.css("top",x):s.css("top","10px")}else"hide"==e&&(l&&d&&p(o,"done",1),a.removeAttr("style").hide().children(".laypop_con").removeAttr("style").hide(),c.css({"overflow-x":"","overflow-y":""}).find("#container").css({"z-index":""}))},amount:function(e){var t=e;$.each(t,function(e){var n=t.eq(e),i=n.children("input"),o=n.children("a").first();o.on("click",function(){return i.val(parseInt(i.val())+1),!1}).next().on("click",function(){return _val=parseInt(i.val())-1,0>_val&&(_val=0),i.val(parseInt(_val)),!1})})},ie8:function(){var e=!0;e=document.all&&!document.querySelector?!0:!1;var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var n=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(n)&&(t=parseFloat(RegExp.$1)),ie=t}else ie=-1;return e},header:function(){function e(){l++;var e=a.children(".best_3"),t=e.find("li").length;_css_top=l%t*-20,e.children().animate({marginTop:_css_top},200)}function t(e){s=e,setTimeout(function(){-1==$.inArray(!0,_mv_depth2)&&void 0!=s&&(s.prev("a").removeClass("on"),s.animate({left:"210px",opacity:0},200,function(){$(this).removeAttr("style")}),p.data("one",!1)),-1==$.inArray(!0,f)&&-1==$.inArray(!0,_mv_depth2)&&(p.removeClass("open"),p.animate({left:"-10px",opacity:0},200,function(){$(this).hide()}).find("dd .on").removeClass("on").next(".ds_3").removeAttr("style"),p.data("one",!1))},100)}var n=$("#header"),i=n.find(".auto_keywords"),o=n.find("#inp_sh"),a=n.find(".best_key"),r=a.children(".best_list"),s=null,c=setInterval(e,3e3),l=0;a.on({mouseleave:function(){r.hide(),c=setInterval(e,3e3)},mouseenter:function(){r.show(),clearInterval(c)}}),r.children("a").on("keydown",function(e){var t=event||e,n=t.which||t.keyCode,i=$(this).parents(".best_list").children().length,o=$(this).parent().index();9===n&&(t.shiftKey&&0==o||!t.shiftKey&&o==i-1)&&a.find(".best_list").hide()}),o.on("keydown",function(){"none"==i.css("display")&&i.show()}).on("focusout",function(){"block"==i.css("display")&&setTimeout(function(){i.hide()},500)}),$(".header .gnb .gnb_contents .myland").on("mouseenter",function(){var e=$(this),t=e.children(".sub_lay");t.show().on("mouseleave",function(){t.hide()})});var d=$("body").hasClass("page-main"),h=$("#btn_navOpen"),p=h.next("ul"),f=[!1,!1];_mv_depth2=[!1,!1],d?h.on({mouseenter:function(){p.show().animate({left:0,opacity:1},200),f[0]=!0},mouseleave:function(){f[0]=!1,t()}}):h.on({click:function(){p.hasClass("open")?(p.removeClass("open"),f[0]=!1,t()):(p.addClass("open").show().animate({left:0,opacity:1},200),f[0]=!0)},mouseleave:function(){f[0]=!1,t()}}),p.on({mouseenter:function(){f[1]=!0},mouseleave:function(){f[1]=!1,t()}}).children("li").on({mouseenter:function(){var e=$(this),t=e.hasClass("l"),n=e.children("dl"),i=e.children(),o=i.outerHeight(!0),a=i.position().top+o/2-8;n.length&&(t&&(a=e.position().top+o/2-8),1==p.data("one")?n.show().css({left:"100%",opacity:1}).find("dt i").css({top:a}):(p.data("one")?p.attr("data-one",!0):p.data("one",!0),n.show().animate({left:"100%",opacity:1},200).find("dt i").css({top:a})))},mouseleave:function(){var e=$(this),t=e.children("dl");t.length&&t.css({left:"95%",opacity:0}).hide()}});var u=$("#btn_weather, #weather_pr .btn_close"),v=$("#weather_pr"),_=v.find(".list_d dd"),m=$("#btn_area, #weather_alert .btn_close"),g=$("#weather_alert"),x={preloadImages:"visible",controls:!0,captions:!0,pager:!1,auto:!1,minSlides:3,maxSlides:3,slideWidth:180,slideMargin:5,infiniteLoop:!1};u.on("click",function(){"block"==v.css("display")?v.hide():(v.show().find("a").first().focus(),$.each(_,function(){var e=$(this);if(1!=e.data("one")){e.attr("data-one",!0);var t=e.find(".list > ul");t.bxSlider(x),t.children().length<=3&&t.parent().next(".bx-controls").hide()}}))}),m.on("click",function(){"block"==g.css("display")?(g.children(".laypop_con").hide(),g.hide()):(g.children().first().show(),g.show().find("a").first().focus())});var w=$("#skyscraperB");if(w.length){var y=$(window),k=$("#footer").offset().top;w.attr("data-top",190),y.on("scroll",function(){var e=y.scrollTop(),t=w,n=t.data("top"),i=t.height()+10,o=n-e,o=0>=o?10:o,a=k-e,r=i-a;r>=0?t.css({top:o-r-5}):t.css({top:o})})}},accordion:function(e,t){e.on("click",function(e){e.preventDefault();var n=$(this),i=n.parents(t).next();i.hasClass("in open")?i.removeClass("in open").hide():i.addClass("in open").show()})},tab:function(e,t,n){void 0==t&&(t=0),$.each(e,function(){var e=$(this),i=e.find("a"),o=[];$.each(i,function(){o.push($(this).data("tabcon"))}),i.attr("data-tabcondb",o).on("click",function(){var e=$(this),t=e.index(),i=e.data("tabcon"),o=e.data("tabcondb"),a=o.replace(i,"").split(",");e.addClass("on").siblings().removeClass("on"),$("#"+i).show(),$.each(a,function(e){""!=a[e]&&$("#"+a[e])&&$("#"+a[e]).hide()}),n&&_return_tab(e,t)}),i.eq(t).trigger("click")})},gps:function(){if("geolocation"in navigator){var e=navigator.geolocation;e.getCurrentPosition(function(e){function t(e,t){var n;return $.ajax({type:"GET",async:!1,url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&sensor=true_or_false",dataType:"json",success:function(e){n=e},error:function(){alert("ajax error")}}),n}var n=e,i=n.coords,o=i.latitude,a=i.longitude,r=(i.accuracy,t(o,a)),s=r.results[0].address_components[2].long_name,c=r.results[0].address_components[3].long_name;$.ajax({type:"POST",async:!1,data:{LOC_INF_ADR:r,CTY_SDO_NM:c,CTY_GGU_NM:s},url:"/pc/common/commonIpInsertAjax.do",dataType:"json",success:function(e){e&&($(".weather > i").attr("class",""),$("#temperTxt").html(Number(e.info.CTY_WTH_CTM)+"<span>°</span>"),$("#locTxt").text(e.info.TODAY+" "+e.info.CTY_GGU_NM))},error:function(){alert("ajax error")}})},function(e){alert({0:"위치 정보 검색에 문제가 있습니다.(msg:"+e.message+")",1:"현재 페이지에서 사용자가 위치 정보 검색을 거부했습니다.",2:"브라우저가 위치정보를 검색하지 못했습니다.(msg:"+e.message+")",3:"브라우저의 위치 정보 검색 시간이 초과됐습니다."}[e.code])})}},pop_chk:function(e){ie_vs=[];var t=navigator.userAgent.toLowerCase(),n="";-1!=t.indexOf("chrome")?n="Chrome":-1!=t.indexOf("opera")?n="Opera":-1!=t.indexOf("staroffice")?n="Star Office":-1!=t.indexOf("webtv")?n="WebTV":-1!=t.indexOf("beonex")?n="Beonex":-1!=t.indexOf("chimera")?n="Chimera":-1!=t.indexOf("netpositive")?n="NetPositive":-1!=t.indexOf("phoenix")?n="Phoenix":-1!=t.indexOf("firefox")?n="Firefox":-1!=t.indexOf("safari")?n="Safari":-1!=t.indexOf("skipstone")?n="SkipStone":-1!=t.indexOf("msie")?n="Internet Explorer":-1!=t.indexOf("netscape")?n="Netscape":-1!=t.indexOf("mozilla/5.0")&&(n="Mozilla"),ie_vs[0]=n;var i="-1",o=navigator.userAgent,a=0;if("Microsoft Internet Explorer"==navigator.appName){var r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(o)&&(i=parseFloat(RegExp.$1));var s=o.split("Trident/");a=s[1].split("."),a=a[0]}else{var s=o.split("Trident/");"undefined"==s[1]||null==s[1]?s="ie_x":(a=s[1].split("."),a=a[0])}"7"==i?"4"==a?(ie_vs[1]="8",ie_vs[2]=!0):"5"==a?(ie_vs[1]="9",ie_vs[2]=!0):"6"==a?(ie_vs[1]="10",ie_vs[2]=!0):(ie_vs[1]="7",ie_vs[2]=!1):"8"==i?(ie_vs[1]="8",ie_vs[2]=!1):"9"==i?(ie_vs[1]="9",ie_vs[2]=!1):"10"==i?(ie_vs[1]="10",ie_vs[2]=!1):"11"==i?(ie_vs[1]="11",ie_vs[2]=!1):"-1"==i&&("7"==a?(ie_vs[1]="11",ie_vs[2]=!0):(ie_vs[1]="-1",ie_vs[2]=!1)),com.pop_resize(e)},pop_resize:function(e){var t=$("body").children().first();t.css({display:"inline-block"}),con_w=t.outerWidth(!0),con_h=t.outerHeight(!0),"Internet Explorer"==ie_vs[0]?"10"==ie_vs[1]||"9"==ie_vs[1]?window.resizeTo(con_w+16,con_h+60):window.resizeTo(con_w+10,con_h+53):"11"==ie_vs[1]&&1==ie_vs[2]?window.resizeTo(con_w+16,con_h+60):"Safari"==ie_vs[0]?window.resizeTo(con_w+16,con_h+98):"Firefox"==ie_vs[0]?window.resizeTo(con_w+18,con_h+65):window.resizeTo(con_w+16,con_h+65),e?$("body").css("overflow","hidden"):$("body").css({overflow:"hidden","overflow-y":"auto"})}}}(),theme=function(){return{pkg_list_h:function(){var e=$(".package_con .pr_list");$.each(e,function(){var e=$(this),t=0;"block"==e.css("display")&&($.each(e.find("li"),function(){var e=$(this);e.css("height","");var n=e.height();n>t&&(t=n)}),e.find("li").height(t))})},pr_ck:function(e){var t=0,n=0,i=$(".wedding_d .package_con .total_price .prc");tx_all_pr=i.find(".all .money"),tx_pk_pr=i.find(".pk .money"),tx_save_pr=i.find(".save strong"),$.each(e,function(){var e=$(this);if(e.hasClass("on")){var i=e.next();t+=parseInt(i.find(".pr_m strong").text().replace(/,/gi,"")),n+=parseInt(i.find(".sel_m strong").text().replace(/,/gi,""))}}),String.prototype.number_format=function(){return this.replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")},tx_all_pr.text(String(t).number_format()),tx_pk_pr.text(String(n).number_format()),tx_save_pr.text(String(t-n).number_format())},pr_ck2:function(e){var e=$(e),t=0,n=0,i=$(".wedding_d .package_con .total_price .prc");tx_all_pr=i.find(".all .money"),tx_pk_pr=i.find(".pk .money"),tx_save_pr=i.find(".save strong"),$.each(e,function(){var e=$(this);if(e.hasClass("on")){var i=e.next();t+=parseInt(i.find(".pr_m strong").text().replace(/,/gi,"")),n+=parseInt(i.find(".sel_m strong").text().replace(/,/gi,""))}}),String.prototype.number_format=function(){return this.replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")},tx_all_pr.text(String(t).number_format()),tx_pk_pr.text(String(n).number_format()),tx_save_pr.text(String(t-n).number_format())}}}();com.sc_ck(),$(window).resize(com.sc_ck),$(document).ready(function(){ie8&&$("#container").find("hr").each(function(){var e=$(this),t=e.parent().width();e.width(t)}),com.sel_chg(),com.header(),$.handlerTooltipOpen=function(e){e.preventDefault();var t=$(this),n=$(this.hash),i=t.data("size").split("x"),o=parseInt(i[0],10),a=(parseInt(i[1],10),t.offset().top+30),r=t.offset().left-o+t.width()+30;n.addClass("in").css({width:o,top:a,left:r})},$.handlerTooltipClose=function(e){e.preventDefault();var t=($(this),$(this.hash));t.removeClass("in").removeAttr("style")},$(".js-tooltip").on("click",function(e){e.preventDefault()}),$(".js-tooltip").on("mouseenter",$.handlerTooltipOpen).on("mouseleave",$.handlerTooltipClose),$.handlerRadio=function(){var e=$(this),t=e.children("input").attr("name"),n=e.parents().find('input[name="'+t+'"]');n.attr("checked",!1).parent().removeClass("on"),e.addClass("on").children("input").prop("checked",!0).trigger("change")},$(".js-radio").on("click",$.handlerRadio),$.handlerCheckbox=function(){var e=$(this);return e.hasClass("on")?e.removeClass("on").children("input").prop("checked",!1).trigger("change"):e.addClass("on").children("input").prop("checked",!0).trigger("change"),!1},$(".js-checkbox").on("click",$.handlerCheckbox);var e=function(){var e=$("html"),t=$("#skyscraperA"),n=$("#skyscraperB"),i=n.children(".keeping-wrap");t.find(".slider").bxSlider({controls:!1,auto:!0}),n.find(".slider").bxSlider({minSlides:3,maxSlides:3,mode:"vertical",pager:!1,infiniteLoop:!1,hideControlOnEnd:!0,slideWidth:240,nextText:'<span class="blind">최근 본 상품 다음 슬라이드</span>',prevText:'<span class="blind">최근 본 상품 이전 슬라이드</span>'}),n.children(".keeping-toggle").on("click",function(e){e.preventDefault(),i.toggleClass("in")}),i.children(".close").on("click",function(e){e.preventDefault(),i.removeClass("in")}),i.find(".tab-a a").on("click",function(e){e.preventDefault();var t=$(this),n=t.parent(),i=$(this.hash);"active"!==n.hasClass&&(n.addClass("active").siblings().removeClass("active"),i.addClass("in").siblings(".toggler").removeClass("in"))}),n.children(".top").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0})}),n.children(".down").on("click",function(t){t.preventDefault();var n=e.height();$("html, body").animate({scrollTop:"+="+n})})};$(".skyscraper").length&&e(),$.fn.dateTerm=function(){return this.each(function(){var e=$(this);e.on("click",function(t){t.preventDefault();var n=$(e.data("start")),i=$(e.data("end")),o=e.data("term"),a=new Date,r=new Date,s=function(e){var t=e.getMonth()+1,n=e.getDate(),i=e.getFullYear()+"-"+(10>t?"0":"")+t+"-"+(10>n?"0":"")+n;return i};return n.length&&i.length&&void 0!==o||alert("error"),0===o?(n.val(""),i.val("")):1==o?(n.val(s(a)),i.val(s(r))):(a.setDate(a.getDate()+o),r.setDate(r.getDate()),n.val(s(a)),i.val(s(r))),!1})})},$(".js-dateTerm").dateTerm(),$.throttle=function(){var e;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),$.fn.floatPanel=function(){var e=$(this),t=$(window),n=$(".payment-box"),i=$("#paymentTotal"),o=0,a=function(){var e=n.offset().top,a=n.height(),r=e+a-t.innerHeight(),s=t.scrollTop(),c=a-i.height();o=s-e,console.log("scroll:"+s,", footTop : "+i.height()),o=o>=0?s>r?c:o:0};t.on("scroll",function(){$.throttle(function(){a(),e.stop().animate({"margin-top":o-1})},100)})},$(".order-sheet").length&&$("#paymentTotal").floatPanel(),$(".page-customer #lnb a.d1").on("click",function(e){e.preventDefault();var t=$(this),n=t.parent();"active"!==n.hasClass&&n.addClass("active").siblings().removeClass("active")}),com.accordion($(".js-option-change"),"tr"),$(".estimate-toggler .more").on("click",function(e){e.preventDefault();var t=$(this),n=t.parents(".estimate-toggler");n.toggleClass("in"),n.hasClass("in")?t.children().text("MD 견적 내역 테이블 닫기"):t.children().text("MD 견적 내역 테이블 열기")}),$(".coupon-search .more").on("click",function(e){e.preventDefault();var t=$(this),n=t.parents(".coupon-search");n.toggleClass("in")}),com.accordion($(".magazine-view .bbs-list a.question"),"tr"),$(".estimate-sheet .clause a.more").on("click",function(e){e.preventDefault();var t=$(this),n=t.parent().parent();t.toggleClass("active"),n.hasClass("in")?(t.find("em").text("닫기"),n.removeClass("in")):(t.find("em").text("열기"),n.addClass("in"))}),$(".cheer-search-hd .search-form input.text").on("keyup",function(e){e.preventDefault();var t=$(this).parent().next(".search-list-wrap");t.addClass("in")}),$(".cheer-search-hd .search-form input.text").on("focusout",function(e){e.preventDefault();var t=$(this).parent().next(".search-list-wrap");t.removeClass("in")})});