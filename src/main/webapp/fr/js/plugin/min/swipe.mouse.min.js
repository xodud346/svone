function Swipe(t,n){"use strict";function e(){m=x.children,p=m.length,m.length<2&&(n.continuous=!1),f.transitions&&n.continuous&&m.length<3&&(x.appendChild(m[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),m=x.children),w=new Array(m.length),E=t.getBoundingClientRect().width||t.offsetWidth,x.style.width=m.length*E+"px";for(var e=m.length;e--;){var i=m[e];i.style.width=E+"px",i.setAttribute("data-index",e),f.transitions&&(i.style.left=e*-E+"px",a(e,b>e?-E:e>b?E:0,0))}n.continuous&&f.transitions&&(a(s(b-1),-E,0),a(s(b+1),E,0)),f.transitions||(x.style.left=b*-E+"px"),t.style.visibility="visible"}function i(){n.continuous?r(b-1):b&&r(b-1)}function o(){n.continuous?r(b+1):b<m.length-1&&r(b+1)}function s(t){return(m.length+t%m.length)%m.length}function r(t,e){if(b!=t){if(f.transitions){var i=Math.abs(b-t)/(b-t);if(n.continuous){var o=i;i=-w[s(t)]/E,i!==o&&(t=-i*m.length+t)}for(var r=Math.abs(b-t)-1;r--;)a(s((t>b?t:b)-r-1),E*i,0);t=s(t),a(b,E*i,e||g),a(t,0,e||g),n.continuous&&a(s(t-i),-(E*i),0)}else t=s(t),d(b*-E,t*-E,e||g);b=t,h(n.callback&&n.callback(b,m[b]))}}function a(t,n,e){u(t,n,e),w[t]=n}function u(t,n,e){var i=m[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+n+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function d(t,e,i){if(!i)return x.style.left=e+"px",void 0;var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>i?(x.style.left=e+"px",y&&c(),n.transitionEnd&&n.transitionEnd.call(event,b,m[b]),clearInterval(s),void 0):(x.style.left=(e-t)*(Math.floor(r/i*100)/100)+t+"px",void 0)},4)}function c(){L=setTimeout(o,y)}function l(){y=0,clearTimeout(L)}var v=function(){},h=function(t){setTimeout(t||v,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,w,E,p,x=t.children[0];n=n||{};var b=parseInt(n.startSlide,10)||0,g=n.speed||300;n.continuous=void 0!==n.continuous?n.continuous:!0;var L,T,y=n.auto||0,k={},D={},M={handleEvent:function(t){switch(t.touches=t.touches||[t],t.type){case"mousedown":this.start(t);break;case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":h(this.end(t));break;case"mousemove":this.move(t);break;case"mouseup":h(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(t));break;case"resize":h(e.call())}n.stopPropagation&&t.stopPropagation()},start:function(t){var n=t.touches[0];k={x:n.pageX,y:n.pageY,time:+new Date},T=void 0,D={},x.addEventListener("touchmove",this,!1),x.addEventListener("touchend",this,!1),x.addEventListener("mousemove",this,!1),x.addEventListener("mouseup",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){n.disableScroll&&t.preventDefault();var e=t.touches[0];D={x:e.pageX-k.x,y:e.pageY-k.y},"undefined"==typeof T&&(T=!!(T||Math.abs(D.x)<Math.abs(D.y))),T||(t.preventDefault(),l(),n.continuous?(u(s(b-1),D.x+w[s(b-1)],0),u(b,D.x+w[b],0),u(s(b+1),D.x+w[s(b+1)],0)):(D.x=D.x/(!b&&D.x>0||b==m.length-1&&D.x<0?Math.abs(D.x)/E+1:1),u(b-1,D.x+w[b-1],0),u(b,D.x+w[b],0),u(b+1,D.x+w[b+1],0)))}},end:function(){var t=+new Date-k.time,e=Number(t)<250&&Math.abs(D.x)>20||Math.abs(D.x)>E/2,i=!b&&D.x>0||b==m.length-1&&D.x<0;n.continuous&&(i=!1);var o=D.x<0;T||(e&&!i?(o?(n.continuous?(a(s(b-1),-E,0),a(s(b+2),E,0)):a(b-1,-E,0),a(b,w[b]-E,g),a(s(b+1),w[s(b+1)]-E,g),b=s(b+1)):(n.continuous?(a(s(b+1),E,0),a(s(b-2),-E,0)):a(b+1,E,0),a(b,w[b]+E,g),a(s(b-1),w[s(b-1)]+E,g),b=s(b-1)),n.callback&&n.callback(b,m[b])):n.continuous?(a(s(b-1),-E,g),a(b,0,g),a(s(b+1),E,g)):(a(b-1,-E,g),a(b,0,g),a(b+1,E,g))),x.removeEventListener("touchmove",M,!1),x.removeEventListener("touchend",M,!1),x.removeEventListener("mousemove",M,!1),x.removeEventListener("mouseup",M,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==b&&(y&&c(),n.transitionEnd&&n.transitionEnd.call(t,b,m[b]))}};return e(),y&&c(),f.addEventListener?(f.touch?x.addEventListener("touchstart",M,!1):x.addEventListener("mousedown",M,!1),f.transitions&&(x.addEventListener("webkitTransitionEnd",M,!1),x.addEventListener("msTransitionEnd",M,!1),x.addEventListener("oTransitionEnd",M,!1),x.addEventListener("otransitionend",M,!1),x.addEventListener("transitionend",M,!1)),window.addEventListener("resize",M,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(t,n){l(),r(t,n)},prev:function(){l(),i()},next:function(){l(),o()},getPos:function(){return b},getNumSlides:function(){return p},kill:function(){l(),x.style.width="auto",x.style.left=0;for(var t=m.length;t--;){var n=m[t];n.style.width="100%",n.style.left=0,f.transitions&&u(t,0,0)}f.addEventListener?(x.removeEventListener("touchstart",M,!1),x.removeEventListener("webkitTransitionEnd",M,!1),x.removeEventListener("msTransitionEnd",M,!1),x.removeEventListener("oTransitionEnd",M,!1),x.removeEventListener("otransitionend",M,!1),x.removeEventListener("transitionend",M,!1),window.removeEventListener("resize",M,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(n){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],n))})}}(window.jQuery||window.Zepto);