!function(e,n,t){"use strict";var o=function(){var o,l,a=e(t),i=e("html"),s={$el:null,$inner:null,$title:null,$buttons:null,$anchor:null,progressObj:null,progress:100,width:0,height:0},r={html:['<div id="modal" class="md-modal"><div class="md-content">','<h3 class="title"><a href="javascript:;">Modal Dialog</a></h3>','<div id="modalInner" class="inner-wrapper"></div>','<div class="section-buttons"></div>','<a href="javascript:;" class="md-close close"><span class="icon"><em>닫기</em></span></a>',"</div>","</div>"],title:"Modal",text:"<p>처리중입니다.</p>",buttonSubmit:!1,buttonCancel:!1,buttonClose:!0,closeOnSubmit:!0,dragAndMove:!0,indicator:!0,labelSubmit:"확인",labelCancel:"취소",labelClose:"닫기",overlay:!0,perspective:!1,position:null,size:null,sizeMax:"800x600",focusFormEl:!0,fx:"fx-9",fullSize:!1,onInit:function(){},onComplete:function(){},onSubmit:function(){},onCancel:function(){},progress:!0,initProgress:function(){if("function"==typeof Nanobar){var n="modalProgressBar";e("#"+n).off().remove(),s.progressObj=new Nanobar({bg:"#ff8000",id:n}),e("#"+n).addClass("progressbar")}},onProgress:function(e){"function"==typeof Nanobar&&"object"==typeof e.progressObj&&e.progressObj.go(e.progress)}},c=/^(\d{1,4})x(\d{1,4})$/,u="webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend transitionEnd",m={lteIE10:!!n.ActiveXObject,gteIE10:!!n.navigator.msPointerEnabled,cssanimations:!i.hasClass("no-cssanimations"),animating:!1},f={second:250,beforeComplete:1,anim:300};f.second=m.lteIE10===!0||m.gteIE10===!0?300:f.second;var d={modal:null,overlay:null,progressComplete:null,beforeComplete:null,forceComplete:null},g={callFunc:function(t,o,l){return void 0!==o&&o===!1?!1:(t="string"==typeof t?n[t]:t,l=null===l?"":l,t&&e.isFunction(t)?t.call(null,s,l):console.log("no exist function"),void 0)},returnAnchor:function(e){var n=void 0!==e[0].tagName&&"a"!==e[0].tagName.toLowerCase()?e.parents("a").eq(0):e;return n},progress:function(n,t){var o=t.find("img"),l=o.length,a=0,r=0,c=function(e){s.progress=e,g.callFunc(n),e>=100&&(d.progressComplete=setTimeout(function(){i.removeClass("is-indicator"),p.setPosition()},f.anim))},u=function(n){var t=o.eq(n);t.length>0?e("<img />",{src:t.attr("src")}).one("load",function(){r=Math.max(parseInt(n/l*100,10),5),c(r),u(n+1)}).error(function(){u(n+1)}):1>=a&&(a++,c(100))};0>l?c(100):(c(5),u(0))}},p={getParam:function(n){var t=null;null!==n[0]&&"object"==typeof n[0]?(t=e(n[0].target),t=g.returnAnchor(t)):console.log("_params[0] is must be event object"),o=n[1],l=e.extend({},r,o),l.html=l.html.join(""),s.$anchor=t},setButton:function(){var n=s.$buttons,t=null,o=l.buttonSubmit,a=l.buttonCancel,i=l.buttonClose;n.empty(),o===!0||a===!0?(o===!0&&(t=e('<a href="javascript:;" class="button submit"><span>'+l.labelSubmit+"</span></a>"),n.append(t)),a===!0&&(t=e('<a href="javascript:;" class="button cancel"><span>'+l.labelCancel+"</span></a>"),n.append(t))):i===!0&&(t=e('<a href="javascript:;" class="button close"><span>'+l.labelClose+"</span></a>"),n.append(t))},setSize:function(){if(l.fullSize===!0)return e.addClass("fx-full"),!1;var e=s.$el,n=s.$inner,t=0,o=0;s.width=e.width(),s.height=e.height();var a=function(){var t=parseInt(n.css("marginTop"),10)+parseInt(n.css("marginBottom"),10),o=parseInt(e.height()-s.$title.height()-s.$buttons.height()-t,10);n.css({height:o,overflow:"auto","overflow-x":"hidden"})};if(void 0!==l.size&&null!==l.size&&c.test(l.size)){var i=l.size.split("x");t=i[0],o=i[1]}if(void 0!==l.sizeMax&&null!==l.sizeMax&&c.test(l.sizeMax)){var r=l.sizeMax.split("x");t=Math.min(t,r[0]),o=Math.min(o,r[1])}t>0&&(s.width=t,e.css("width",t)),o>0&&(s.height=o,e.css("height",o),a())},setPerspective:function(e){return l.perspective===!1?!1:(i.toggleClass("md-perspective",e),void 0)},setPosition:function(){if("fx-7"===l.fx||"fx-12"===l.fx)return!1;var e,n,t,o=s.$el,a=o.width(),i=o.height(),r=function(){o.css({"margin-left":0-a/2,"margin-top":0-i/2})},c=function(){var a=s.$anchor.offset(),i=parseInt(a.top,10),r=parseInt(a.left,10);"left bottom"==l.position&&(t="arrow",e=i-o.height()-10,n=r),o.addClass(t),o.css({position:"absolute","z-index":99,top:e,left:n})};null!==l.position?c():r()},toggleOverlay:function(e){return l.overlay===!1||null!==l.position?!1:(i.toggleClass("is-overlay",e),void 0)},dragMove:function(n){if(l.dragAndMove===!1)return!1;var t=".md-modal .title",o="is-handle-clicked",i=e(t),s=i.parents(".md-modal"),r=function(e){e.preventDefault(),s.toggleClass(o,!1),a.off(".draggr-sub")},c=function(e){var n=i.offset(),l=e.pageX-n.left,c=e.pageY-n.top;s.toggleClass(o,!0),a.one("mouseup.draggr-sub",t,r),a.one("mouseup.draggr-sub",r),a.on("mousemove.draggr-sub",function(e){return e.preventDefault(),s.hasClass(o)!==!0?!1:(s.offset({left:e.pageX-l,top:e.pageY-c}),void 0)})},u=function(){i.css("cursor","move"),a.off(".draggr .draggr-sub"),a.on("mousedown.draggr",t,c)};n===!0?u():a.off(".draggr .draggr-sub")}},v={reset:function(){e("#modal").remove();var n=function(){s.$el=e(l.html).prependTo("body"),s.$inner=s.$el.find(".inner-wrapper"),s.$title=s.$el.find(".title"),s.$buttons=s.$el.find(".section-buttons"),s.$close=s.$el.find(".md-close")};n(),i.toggleClass("is-modal is-overlay",!1),g.callFunc(l.onInit)},destroy:function(){return m.animating===!0?!1:(v.toggle(!1),void 0)},setFocus:function(e){var n=s.$anchor,t=s.$title,o=s.$el,a=o.find('input[type="text"], input[type="number"]');e===!0?(o.attr("tabindex","1").focus(),t.children().focus(),a.length&&l.focusFormEl===!0&&a.eq(0).focus()):n.focus()},handler:function(n){a.off(".modal");var t=function(){v.destroy()};n===!0&&(a.one("click.modal","#modal a.close",function(e){e.preventDefault(),e.stopPropagation(),t()}),a.one("click.modal","#modal .submit",function(){g.callFunc(l.onSubmit),l.closeOnSubmit===!0&&t()}),a.one("click.modal","#modal .cancel",function(){g.callFunc(l.onCancel),t()}),e(".md-close").on("focusout.modal",function(){s.$title.children().focus()}),d.overlay=setTimeout(function(){a.one("click.modal","#overlay",function(e){e.preventDefault(),e.stopPropagation(),t()})},f.anim))},open:function(){if(m.animating===!0)return!1;var e=s.$el,n=s.$title,t=s.$close;e.addClass(l.fx),n.children().html(l.title+'<span class="sr-only"> 레이어</span>'),t.find("em").text(l.title+" 레이어 닫기"),l.indicator===!0&&i.addClass("is-indicator"),l.progress===!0&&(g.callFunc(l.initProgress),g.progress(l.onProgress,e)),p.setButton(),p.setSize(),p.setPosition(),v.toggle(!0)},resetTimer:function(){clearTimeout(d.modal),clearTimeout(d.overlay),clearTimeout(d.beforeComplete),clearTimeout(d.forceComplete)},toggle:function(e){var n=s.$el,t=0;m.animating=!0,v.resetTimer();var o=function(o){return t>=1?!1:(t++,n.off(u),d.beforeComplete=setTimeout(function(){m.animating=!1,i.toggleClass("is-modal",e),n.toggleClass("is-modal-complete",e),p.setPerspective(e),p.dragMove(e),v.resetTimer(),v.handler(e),v.setFocus(e),g.callFunc(l.onComplete,e),l.progress===!1&&i.removeClass("is-indicator"),e===!1&&n.remove(),console.log("modal toggled by: "+o)},f.beforeComplete),void 0)};e===!0&&m.cssanimations===!0&&n.one(u,function(){o("transitionend")}),d.modal=setTimeout(function(){e===!0&&p.setPerspective(e),n.toggleClass("md-show",e),p.toggleOverlay(e),d.forceComplete=setTimeout(function(){o("force")},f.anim)},f.second)},drag:function(e){console.log(e.pageY)}},h={html:function(){s.$inner.html(l.text),v.open()},ajax:function(){var n,t,o=e("<div />"),a=".modal-inner",i=l.text,r=function(e){o.html(e),n=o.find("div").eq(0),t=o.find(a),o=t.length?t:n,s.$inner.html(o.html()),v.open()};try{o.load(i,function(e){r(e)})}catch(c){console.log(c.message)}},clone:function(){var n=e(l.text);return n.length?(s.$inner.html(n.html()),v.open(),void 0):(console.log("there is no element"),!1)},iframe:function(){var n=e('<iframe src="'+l.text+'" class="iframe" frameborder="0" width="400" height="400" marginwidth="0" marginheight="0" scrolling="no" />');s.$inner.append(n),v.open()},image:function(){s.$inner.html(l.text),v.open()}},b=function(e,n){switch(p.getParam(e),v.reset(),n){case"clone":h.clone();break;case"ajax":h.ajax();break;case"iframe":h.iframe();break;case"image":h.image();break;default:h.html()}};return{close:function(){v.destroy()},html:function(){b(arguments,"html")},clone:function(){b(arguments,"clone")},ajax:function(){b(arguments,"ajax")},iframe:function(){b(arguments,"iframe")},image:function(){b(arguments,"image")}}};e.modal=new o}(jQuery,window,document,navigator.userAgent||navigator.vendor||window.opera),$(function(){var e=$(document),n=!1,t=null,o=function(e){var n=void 0!==e[0].tagName&&"a"!==e[0].tagName.toLowerCase()?e.parents("a").eq(0):e;return n},l=function(e){var n={},t={html:null,title:null,text:null,buttonSubmit:null,buttonCancel:null,buttonClose:null,closeOnSubmit:null,dragAndMove:!0,indicator:null,labelSubmit:null,labelCancel:null,labelClose:null,overlay:null,position:null,perspective:null,size:null,sizeMax:null,focusFormEl:null,fx:null,fullSize:null,onInit:null,onComplete:null,onSubmit:null,onCancel:null,progress:null,initProgress:null,onProgress:null},l=$(e.target);return l=o(l),$.each(t,function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=l.data(t);void 0!==o&&(n[t]=o)}),n},a=function(e){var a,i=$(e.target);if(i=o(i),a=i.attr("class"),void 0!==a&&a.match("js-modal")){if(e.preventDefault(),e.stopPropagation(),t=setTimeout(function(){n=!1},300),n===!0)return!1;n=!0,a.match("js-modal-html")?$.modal.html(e,l(e)):a.match("js-modal-image")?$.modal.html(e,l(e)):a.match("js-modal-clone")?$.modal.clone(e,l(e)):a.match("js-modal-ajax")?$.modal.ajax(e,l(e)):a.match("js-modal-close")&&$.modal.close(e)}};e.on("click",a)});